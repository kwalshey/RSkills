devtools::load_all(".")
install.packages("data.table")
install.packages("ggplot2")
devtools::load_all(".")
install.packages("fst")
devtools::load_all(".")
devtools::load_all(".")
library(fst)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
daily_US_prices <- read.fst("data/daily_US_prices.fst")
View(daily_US_prices)
monthly_world_val <- read.fst("data/monthly_world_val.fst")
View(monthly_world_val)
monthly_world_val <- fread(read.fst("data/monthly_world_val.fst"))
daily_US_prices <- fread(read.fst("data/daily_US_prices.fst"))
library(data.table)
monthly_world_val <- fread(read.fst("data/monthly_world_val.fst"))
daily_US_prices <- fread(read.fst("data/daily_US_prices.fst"))
monthly_world_val <- setDT(read.fst("data/monthly_world_val.fst"))
daily_US_prices <- setDT(read.fst("data/daily_US_prices.fst"))
library(ggplot2)Error in read_fst(path, columns, from, to, as.data.table, old_format) :
Error opening fst file for reading, please check access rights and file availability
library(ggplot2)
devtools::load_all(".")
levels(monthly_US   )
levels(monthly_world_val)
levels(monthly_world_val$COUNTRY)
levels(monthly_world_val[,COUNTRY])
devtools::load_all(".")
levels(monthly_world_val[,COUNTRY])
monthly_world_val <- setDT(read.fst("data/monthly_world_val.fst"))
levels(monthly_world_val[,COUNTRY])
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
debugSource('C:/Personal/Programming/RSkills/R/RSkills.R', encoding = 'UTF-8', echo=TRUE)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
library(data.table)
library(ggplot2)
library(fst)
# read in data using fst, then convert to data.table
monthly_world_val <- setDT(read.fst("ext_data/monthly_world_val.fst"))
daily_US_prices <- setDT(read.fst("ext_data/daily_US_prices.fst"))
# investigate unique country levels to ensure US isn't references multiple times
# under various guises
levels(monthly_world_val[,COUNTRY])
monthly_US_val <- monthly_world_val[COUNTRY="United States"]
monthly_US_val <- monthly_world_val[COUNTRY=="United States"]
monthly_US_val <- monthly_world_val[COUNTRY==country]
country <- "United States"
monthly_US_val <- monthly_world_val[COUNTRY==country]
levels(monthly_world_val[,SECTOR])
levels(monthly_US_val[,SECTOR])
monthly_US_val[SECTOR=="Process Ind."]
monthly_US_val[SECTOR=="Soft Commodities"]
monthly_US_val[SECTOR=="Precious Metals"]
monthly_US_val[SECTOR=="EXCLUDE"]
monthly_US_val[SECTOR=="Investment Management Services"]
hi <- monthly_US_val[SECTOR=-"EXCLUDE"]
hi <- monthly_US_val[SECTOR==-"EXCLUDE"]
hi <- monthly_US_val[SECTOR=-"EXCLUDE"]
hi <- monthly_US_val[SECTOR=="EXCLUDE"]
hi <- monthly_US_val[SECTOR!="EXCLUDE"]
levels(hi[SECTOR])
levels(hi[,SECTOR])
View(hi)
hi[SECTOR=="EXCLUDE"]
exclude <- "EXCLUDE"
monthly_US_val_ex <- monthly_US_val[SECTOR!=exclude]
agg <- monthly_US_val_ex[, .(DATE, EV, SALES)]
View(agg)
hi <- monthly_US_val_ex[, .(sum(EV), sum(SALES)), by=date()]
hi <- monthly_US_val_ex[, .(sum(EV), sum(SALES)), by=.(DATE)]
View(hi)
hi <- monthly_US_val_ex[, .(EV_agg = sum(EV), SALES_agg = sum(SALES)), by=.(DATE)]
EV_to_SALES_agg <- agg[, .(EVSALES = EV_agg/SALES_agg)]
agg <- monthly_US_val_ex[, .(EV_agg = sum(EV), SALES_agg = sum(SALES)), by=.(DATE)]
EV_to_SALES_agg <- agg[, .(EVSALES = EV_agg/SALES_agg)]
View(EV_to_SALES_agg)
EV_to_SALES_agg <- agg[, .(DATE, EVSALES = EV_agg/SALES_agg)]
View(EV_to_SALES_agg)
gpplot(data=EV_to_SALES_agg) + geom_line()
library(ggplot2)
gpplot(data=EV_to_SALES_agg) + geom_line()
gpplot2(data=EV_to_SALES_agg) + geom_line()
ggplot(data=EV_to_SALES_agg) + geom_line()
View(EV_to_SALES_agg)
ggplot(data=EV_to_SALES_agg, aes(x=DATE, y=EVSALES)) + geom_line()
# calculate median EV/Sales through time
med <- monthly_US_val_ex[, .(EV_med = median(EV), SALES_med = median(SALES)), by=.(DATE)]
EV_to_SALES_med<- med[, .(DATE, EVSALES = EV_med/SALES_med)]
ggplot(data=EV_to_SALES_med, aes(x=DATE, y=EVSALES)) + geom_line()
monthly_US_val_ex_grp <- monthly_US_val_ex[, .(EV_agg = sum(EV), SALES_agg = sum(SALES),
EV_med = median(EV), SALES_med = median(SALES)), by=.(DATE)]
EV_to_SALES <- monthly_US_val_ex_grp[, .(DATE, EVSALES_agg = EV_agg/SALES_agg,
EVSALES_med = EV_med/SALES_med)]
ggplot(data=EV_to_SALES_med, aes(x=DATE)) + geom_line(y=EVSALES_agg) + geom_line(y=EVSALES_med)
ggplot(data=EV_to_SALES, aes(x=DATE)) + geom_line(y=EVSALES_agg) + geom_line(y=EVSALES_med)
EV_to_SALES <- monthly_US_val_ex_grp[, .(DATE, EVSALES_agg = EV_agg/SALES_agg,
EVSALES_med = EV_med/SALES_med)]
ggplot(data=EV_to_SALES, aes(x=DATE)) + geom_line(y=EVSALES_agg) + geom_line(y=EVSALES_med)
View(EV_to_SALES)
ggplot(data=EV_to_SALES, aes(x=DATE)) + geom_line(aes(y=EVSALES_agg) + geom_line(aes(y=EVSALES_med))
)
ggplot(data=EV_to_SALES, aes(x=DATE)) + geom_line(aes(y=EVSALES_agg)) + geom_line(aes(y=EVSALES_med))
ggplot(data=EV_to_SALES, aes(x=DATE)) +
geom_line(aes(y=EVSALES_agg), color="red") +
geom_line(aes(y=EVSALES_med), color="blue", linetype="twodash")
install.packages("reshape2")
library(reshape2)
melt
library(data.table)
melt
remove.packages("reshape2", lib="~/R/win-library/4.0")
melt
library(data.table)
melt
